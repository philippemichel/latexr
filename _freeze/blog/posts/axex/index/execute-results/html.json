{
  "hash": "18da2fa666deb2d95980785b6bec4eef",
  "result": {
    "markdown": "---\ntitle: \"Des labels trop longs\"\ndescription: \"\"\nauthor: \"Philippe MICHEL\"\ncategories:\n  - R\n  - Graphiques\nwarning: false\n---\n\n\nVous avez un beau graphique mmais les labels (souvent sur l'axe des X) sont trop longs, se superposent...\n\n:::{.callout-note}\nLes graphiques qui suivent sont volontairement très simple afin d'avoir le code le plus court possible. \n\nJ'utilise ici la base de données `penguins` où j'ai juste créer des labels immondes; très très longs.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(palmerpenguins)\nlevels(penguins$species) <- paste0(levels(penguins$species),\" \",\n                                   levels(penguins$species),\" \",levels(penguins$species),\" \",levels(penguins$species))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot() +\n  theme(\n    axis.text.x = element_text(size = 12)\n  )\n```\n\n::: {.cell-output-display}\n![Ça embouteille](index_files/figure-html/fig-laid-1.png){#fig-laid width=672}\n:::\n:::\n\n\nNous allons présenter trois solutions : \n\n- Réduire la taille des caractères. Simple, efficace mais a ses limites !\n- Faire pivoter les labels. Plus élégant mais pas toujours possible.\n- Mettre le texte sur deux lignes.  Lourd mais parfois nécessaire.\n- Décaler un label sur deux\n\nMais n'oubliez pas qu'un graphique doit tout d'abord être simple & rapide à lire. La meilleure solution est toujours de réduire la longueur des labels.\n\n::: {.panel-tabset}\n\n# Faire pivoter les labels\n\nOn trouve le bon angle par tâtonnement. Ne pas oublier d'ajuster le centrage (`hjust`) pour que le label soit bien positionné.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot() +\n  theme(\n    axis.text.x = element_text(size = 12, angle = 20, hjust = 1)\n  )\n```\n\n::: {.cell-output-display}\n![Labels pivotés](index_files/figure-html/fig-angle-1.png){#fig-angle width=672}\n:::\n:::\n\n\n# Mettre le texte sur deux lignes. \n\nCertes souvent efficace mais peu lisible. À combiner le plus souvent avec un peu d'angle.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scales) # Pour la fonction label_wrap\n\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot() +\n  theme(\n    axis.text.x = element_text(size = 12)\n  ) +\n   scale_x_discrete(labels = label_wrap(20)) # On choisit la longueur des lignes\n```\n\n::: {.cell-output-display}\n![Labels sur deux lignes](index_files/figure-html/fig-lignes-1.png){#fig-lignes width=672}\n:::\n:::\n\n\n# Décaler un label sur deux\n\nSolution souvent élégante, facile à mettre en place depuis la nouvelle version de ggplot2.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot() +\n  theme(\n    axis.text.x = element_text(size = 12)\n  ) +\n    scale_x_discrete(guide = guide_axis(n.dodge = 2))\n```\n\n::: {.cell-output-display}\n![Labels alternés](index_files/figure-html/fig-decal-1.png){#fig-decal width=672}\n:::\n:::\n\n\n# Autres solutions\n\n- Pour les variables numériques il suffit souvent de modifier les labels : afficher de 20en 20 est parfois plus clair que de 10 en 10.\n\n## Pivoter\n\nUne solution radicale est de pivoter tout le graphique quitte à l'utiliser en combinaison avec les propositions précédentes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g)) +\n  geom_boxplot() +\n  theme(\n    axis.text.x = element_text(size = 12)\n  ) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![Graphique pivoté](index_files/figure-html/fig-pivotc-1.png){#fig-pivotc width=672}\n:::\n:::\n\n\n\n:::\n\n:::{.callout-tip}\n## Pour me joindre\n\nUn simple mail à <a href=\"mailto:docphilmstat@gmail.com\">docphilmstat@gmail.com</a> ou un message sur [Twitter](https://twitter.com/PhiippeMICHEL) & je vous répondrai dans les plus brefs délais.\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}